(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[942],{2525:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(9946).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},3016:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(5155),n=a(2115);let s=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var l=a(2618),d=a(7537),o=a(3077),i=a(4589),c=a(2525);let m=e=>{let{item:t,onSave:a,onDelete:s,onDone:l,existingCategories:d}=e,[m,x]=(0,n.useState)(()=>{var e,a,r;let n={itemName:"",planned:"",category:d[0]||"new",type:"expense",paymentMonths:[],corrections:[],totalAmount:"",amountPaidOff:""};return t?{...n,...t,planned:null!=(e=t.planned)?e:"",totalAmount:null!=(a=t.totalAmount)?a:"",amountPaidOff:null!=(r=t.amountPaidOff)?r:""}:n}),[g,h]=(0,n.useState)(""),[u,y]=(0,n.useState)(!1),p=!!t;(0,n.useEffect)(()=>{"Loan"===m.category&&x(e=>({...e,type:"expense"}))},[m.category]);let b=e=>x(t=>({...t,[e.target.name]:e.target.value})),j="mt-1 block w-full rounded-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2";return(0,r.jsxs)(r.Fragment,{children:[u&&(0,r.jsx)(o.R,{onConfirm:()=>{t&&t.id&&(s(t.id),y(!1),l())},onCancel:()=>y(!1)}),(0,r.jsxs)("div",{className:"dark-mode-transition",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:p?"Edit Item":"Add New Item"}),(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r="new"===m.category?g:m.category;if(!m.itemName||!m.planned||!r||0===m.paymentMonths.length)return void alert("Please fill out all required fields and select at least one payment month.");let n={itemName:m.itemName,category:r,type:m.type,planned:Number(m.planned),paymentMonths:m.paymentMonths,corrections:m.corrections};"Loan"===m.category&&(n.totalAmount=Number(m.totalAmount),n.amountPaidOff=Number(m.amountPaidOff)),p&&(null==t?void 0:t.id)?n.id=t.id:n.id=Date.now(),a(n),l()},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Item Name"}),(0,r.jsx)("input",{type:"text",name:"itemName",value:m.itemName,onChange:b,placeholder:"e.g., Netflix",className:j})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount per Payment"}),(0,r.jsx)("input",{type:"number",name:"planned",value:m.planned,onChange:b,placeholder:"e.g., 99",className:j})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Type"}),(0,r.jsxs)("select",{name:"type",value:m.type,onChange:b,className:j,disabled:"Loan"===m.category,children:[(0,r.jsx)("option",{value:"expense",children:"Expense"}),(0,r.jsx)("option",{value:"income",children:"Income"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Category"}),(0,r.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,r.jsxs)("select",{name:"category",value:m.category,onChange:b,className:"block w-full rounded-none ".concat("new"===m.category?"rounded-l-md":"rounded-md"," border-gray-300 dark:border-gray-600 dark:bg-gray-700 focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"),children:[d.map(e=>(0,r.jsx)("option",{value:e,children:e},e)),(0,r.jsx)("option",{value:"new",children:"-- Add New Category --"})]}),"new"===m.category&&(0,r.jsx)("input",{type:"text",value:g,onChange:e=>h(e.target.value),placeholder:"New Category Name",className:"block w-full rounded-r-md border-gray-300 dark:border-gray-600 dark:bg-gray-700 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm p-2"})]})]}),"Loan"===m.category&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Total Loan Amount"}),(0,r.jsx)("input",{type:"number",name:"totalAmount",value:m.totalAmount,onChange:b,placeholder:"e.g., 237000",className:j})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Amount Already Paid Off"}),(0,r.jsx)("input",{type:"number",name:"amountPaidOff",value:m.amountPaidOff,onChange:b,placeholder:"e.g., 44400",className:j})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Payment Months"}),(0,r.jsx)("div",{className:"mt-2 grid grid-cols-6 md:grid-cols-12 gap-2",children:i.K.map((e,t)=>(0,r.jsx)("div",{onClick:()=>(e=>x(t=>({...t,paymentMonths:t.paymentMonths.includes(e)?t.paymentMonths.filter(t=>t!==e):[...t.paymentMonths,e].sort((e,t)=>e-t)})))(t+1),className:"text-center p-2 rounded-md cursor-pointer text-sm transition-colors ".concat(m.paymentMonths.includes(t+1)?"bg-indigo-600 text-white":"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"),children:e.substring(0,3)},e))})]}),p&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Corrections (Actual Amount)"}),(0,r.jsx)("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4",children:m.paymentMonths.map(e=>{var t;return(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:i.K[e-1]}),(0,r.jsx)("input",{type:"number",placeholder:"Plan: ".concat(m.planned),value:(null==(t=m.corrections.find(t=>t.month===e))?void 0:t.amount)||"",onChange:t=>((e,t)=>x(a=>({...a,corrections:t?[...a.corrections.filter(t=>t.month!==e),{month:e,amount:Number(t)}]:a.corrections.filter(t=>t.month!==e)})))(e,t.target.value),className:j})]},e)})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center pt-4",children:[(0,r.jsx)("div",{children:p&&(0,r.jsxs)("button",{type:"button",onClick:()=>y(!0),className:"inline-flex items-center gap-2 py-2 px-4 text-sm font-medium rounded-md text-red-600 bg-transparent hover:bg-red-50 dark:hover:bg-red-900/50",children:[(0,r.jsx)(c.A,{className:"w-4 h-4"})," Delete Item"]})}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{type:"button",onClick:l,className:"py-2 px-4 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:p?"Save Changes":"Add Item"})]})]})]})]})]})};var x=a(5153),g=a(4676);let h=e=>{let{content:t,children:a}=e,[s,l]=(0,n.useState)(!1);return(0,r.jsxs)("div",{className:"relative",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[a,s&&(0,r.jsxs)("div",{className:"absolute bottom-full mb-2 w-max bg-gray-800 text-white text-xs rounded py-1 px-2 z-10 left-1/2 -translate-x-1/2",children:[t,(0,r.jsx)("div",{className:"absolute top-full left-1/2 -translate-x-1/2 w-0 h-0 border-x-4 border-x-transparent border-t-4 border-t-gray-800"})]})]})},u=()=>{let e=(0,n.useContext)(l.o);if(!e)throw Error("Context not found");let{budgetData:t,monthsPassed:a,updateBudgetItem:s,deleteBudgetItem:o,addBudgetItem:i}=e,[c,u]=(0,n.useState)(null),y=(0,n.useMemo)(()=>["Salary","Loan",...new Set(t.map(e=>e.category).filter(e=>!["Salary","Loan"].includes(e)))],[t]),p=(0,n.useMemo)(()=>[...t].sort((e,t)=>e.type!==t.type?"income"===e.type?-1:1:"income"===e.type?t.planned-e.planned:"expense"===e.type?e.category.localeCompare(t.category):0),[t]);return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden dark-mode-transition",children:[c&&(0,r.jsx)(d.A,{onClose:()=>u(null),children:(0,r.jsx)(m,{item:"id"in c?c:null,onSave:e=>{"id"in e&&t.some(t=>t.id===e.id)?s(e):i(e)},onDelete:o,onDone:()=>u(null),existingCategories:y})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,r.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:"Item Name"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:"Category"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:"Type"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:"Planned Amount"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:"Payment Months"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:"Corrected (YTD)"}),(0,r.jsx)("th",{scope:"col",className:"px-4 py-3",children:(0,r.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,r.jsx)("tbody",{children:p.map((e,t)=>(0,r.jsxs)("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 dark-mode-transition",children:[(0,r.jsx)("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:e.itemName}),(0,r.jsx)("td",{className:"px-4 py-3",children:e.category}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("income"===e.type?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:e.type})}),(0,r.jsxs)("td",{className:"px-4 py-3",children:[e.planned.toLocaleString()," DKK"]}),(0,r.jsx)("td",{className:"px-4 py-3 text-xs",children:(0,g.XI)(e.paymentMonths)}),(0,r.jsx)("td",{className:"px-4 py-3",children:(0,r.jsx)(h,{content:"Projected Annual: ".concat((0,g.sY)(e,a).toLocaleString()," DKK"),children:(0,r.jsxs)("span",{children:[(0,g.Dr)(e,a).toLocaleString()," DKK"]})})}),(0,r.jsx)("td",{className:"px-4 py-3 text-right",children:(0,r.jsx)("button",{onClick:()=>u(e),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-200",children:(0,r.jsx)(x.ff,{className:"w-4 h-4"})})})]},t))})]})})]})},y=()=>{let e=(0,n.useContext)(l.o);if(!e)throw Error("Context not found");let{budgetData:t,monthsPassed:a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.K.map((e,n)=>{let s=n+1,l=t.filter(e=>e.paymentMonths.includes(s)),d=l.reduce((e,t)=>{var a;return e+("income"===t.type?(null==(a=t.corrections.find(e=>e.month===s))?void 0:a.amount)||t.planned:0)},0),o=l.reduce((e,t)=>{var a;return e+("expense"===t.type?(null==(a=t.corrections.find(e=>e.month===s))?void 0:a.amount)||t.planned:0)},0),i=d-o;return(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg overflow-hidden dark-mode-transition ".concat(s>a?"opacity-60":""),children:[(0,r.jsxs)("div",{className:"p-4 border-b dark:border-gray-700",children:[(0,r.jsx)("h4",{className:"font-bold text-lg text-gray-800 dark:text-white text-center mb-2",children:e}),(0,r.jsxs)("div",{className:"flex justify-around text-sm mt-1",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Income"}),(0,r.jsxs)("p",{className:"text-green-500 font-medium",children:["+",d.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Expenses"}),(0,r.jsxs)("p",{className:"text-red-500 font-medium",children:["-",o.toLocaleString()]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Net"}),(0,r.jsxs)("p",{className:"font-bold ".concat(i>=0?"text-green-500":"text-red-500"),children:[i.toLocaleString()," DKK"]})]})]})]}),(0,r.jsx)("ul",{className:"p-4 space-y-2 text-sm",children:l.length>0?l.map(e=>{var t;return(0,r.jsxs)("li",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:e.itemName}),(0,r.jsxs)("span",{className:"income"===e.type?"text-green-500":"text-red-500",children:["income"===e.type?"+":"-",((null==(t=e.corrections.find(e=>e.month===s))?void 0:t.amount)||e.planned).toLocaleString()]})]},e.id)}):(0,r.jsx)("li",{className:"text-gray-400 italic",children:"No transactions."})})]},e)})})},p=()=>{let e=(0,n.useContext)(l.o);if(!e)throw Error("Context not found");let{budgetData:t,addBudgetItem:a,updateBudgetItem:o,deleteBudgetItem:i}=e,[c,x]=(0,n.useState)(null),[g,h]=(0,n.useState)("list"),p=(0,n.useMemo)(()=>["Salary","Loan",...new Set(t.map(e=>e.category).filter(e=>!["Salary","Loan"].includes(e)))],[t]);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("header",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white",children:"Detailed Budget"}),(0,r.jsx)("p",{className:"text-lg text-gray-500 dark:text-gray-400 mt-1",children:"Manage all your individual income and expense items."})]}),(0,r.jsxs)("button",{onClick:()=>x({}),className:"inline-flex items-center gap-2 justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[(0,r.jsx)(s,{className:"w-5 h-5"})," Add New Item"]})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsxs)("span",{className:"isolate inline-flex rounded-md shadow-sm",children:[(0,r.jsx)("button",{onClick:()=>h("list"),type:"button",className:"relative inline-flex items-center rounded-l-md px-3 py-2 text-sm font-semibold transition-colors ".concat("list"===g?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-700 hover:bg-gray-50"),children:"List View"}),(0,r.jsx)("button",{onClick:()=>h("monthly"),type:"button",className:"relative -ml-px inline-flex items-center rounded-r-md px-3 py-2 text-sm font-semibold transition-colors ".concat("monthly"===g?"bg-indigo-600 text-white":"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 ring-1 ring-inset ring-gray-300 dark:ring-gray-700 hover:bg-gray-50"),children:"By Month"})]})})]}),c&&(0,r.jsx)(d.A,{onClose:()=>x(null),children:(0,r.jsx)(m,{item:"id"in c?c:null,onSave:e=>{"id"in e&&t.some(t=>t.id===e.id)?o(e):a(e)},onDelete:i,onDone:()=>x(null),existingCategories:p})}),"list"===g?(0,r.jsx)(u,{}):(0,r.jsx)(y,{})]})}},3077:(e,t,a)=>{"use strict";a.d(t,{R:()=>s});var r=a(5155);a(2115);var n=a(7537);function s(e){let{onConfirm:t,onCancel:a}=e;return(0,r.jsxs)(n.A,{onClose:a,children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Confirm Deletion"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Are you sure you want to delete this item? This action cannot be undone."}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,r.jsx)("button",{onClick:a,className:"py-2 px-4 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600",children:"Cancel"}),(0,r.jsx)("button",{onClick:t,className:"py-2 px-4 text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}},7271:(e,t,a)=>{Promise.resolve().then(a.bind(a,3016))},7537:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(5155);function n(e){let{children:t,onClose:a}=e;return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:a,children:(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl max-h-full overflow-y-auto dark-mode-transition",onClick:e=>e.stopPropagation(),children:t})})}a(2115)}},e=>{e.O(0,[136,441,964,358],()=>e(e.s=7271)),_N_E=e.O()}]);